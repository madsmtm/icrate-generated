//! This file has been automatically generated by `objc2`'s `header-translator`.
//! DO NOT EDIT
use crate::common::*;
use crate::Foundation::*;
use crate::Metal::*;

ns_enum!(
    #[underlying(NSUInteger)]
    pub enum MTLCommandBufferStatus {
        MTLCommandBufferStatusNotEnqueued = 0,
        MTLCommandBufferStatusEnqueued = 1,
        MTLCommandBufferStatusCommitted = 2,
        MTLCommandBufferStatusScheduled = 3,
        MTLCommandBufferStatusCompleted = 4,
        MTLCommandBufferStatusError = 5,
    }
);

extern_static!(MTLCommandBufferErrorDomain: &'static NSErrorDomain);

ns_enum!(
    #[underlying(NSUInteger)]
    pub enum MTLCommandBufferError {
        MTLCommandBufferErrorNone = 0,
        MTLCommandBufferErrorInternal = 1,
        MTLCommandBufferErrorTimeout = 2,
        MTLCommandBufferErrorPageFault = 3,
        MTLCommandBufferErrorBlacklisted = 4,
        MTLCommandBufferErrorAccessRevoked = 4,
        MTLCommandBufferErrorNotPermitted = 7,
        MTLCommandBufferErrorOutOfMemory = 8,
        MTLCommandBufferErrorInvalidResource = 9,
        MTLCommandBufferErrorMemoryless = 10,
        MTLCommandBufferErrorDeviceRemoved = 11,
        MTLCommandBufferErrorStackOverflow = 12,
    }
);

extern_static!(MTLCommandBufferEncoderInfoErrorKey: &'static NSErrorUserInfoKey);

ns_options!(
    #[underlying(NSUInteger)]
    pub enum MTLCommandBufferErrorOption {
        MTLCommandBufferErrorOptionNone = 0,
        MTLCommandBufferErrorOptionEncoderExecutionStatus = 1 << 0,
    }
);

ns_enum!(
    #[underlying(NSInteger)]
    pub enum MTLCommandEncoderErrorState {
        MTLCommandEncoderErrorStateUnknown = 0,
        MTLCommandEncoderErrorStateCompleted = 1,
        MTLCommandEncoderErrorStateAffected = 2,
        MTLCommandEncoderErrorStatePending = 3,
        MTLCommandEncoderErrorStateFaulted = 4,
    }
);

extern_class!(
    #[derive(Debug, PartialEq, Eq, Hash)]
    #[cfg(feature = "Metal_MTLCommandBufferDescriptor")]
    pub struct MTLCommandBufferDescriptor;

    #[cfg(feature = "Metal_MTLCommandBufferDescriptor")]
    unsafe impl ClassType for MTLCommandBufferDescriptor {
        type Super = NSObject;
    }
);

extern_methods!(
    #[cfg(feature = "Metal_MTLCommandBufferDescriptor")]
    unsafe impl MTLCommandBufferDescriptor {
        #[method(retainedReferences)]
        pub unsafe fn retainedReferences(&self) -> bool;

        #[method(setRetainedReferences:)]
        pub unsafe fn setRetainedReferences(&self, retained_references: bool);

        #[method(errorOptions)]
        pub unsafe fn errorOptions(&self) -> MTLCommandBufferErrorOption;

        #[method(setErrorOptions:)]
        pub unsafe fn setErrorOptions(&self, error_options: MTLCommandBufferErrorOption);
    }
);

extern_protocol!(
    pub struct MTLCommandBufferEncoderInfo;

    unsafe impl ProtocolType for MTLCommandBufferEncoderInfo {
        #[cfg(feature = "Foundation_NSString")]
        #[method_id(@__retain_semantics Other label)]
        pub unsafe fn label(&self) -> Id<NSString, Shared>;

        #[cfg(all(feature = "Foundation_NSArray", feature = "Foundation_NSString"))]
        #[method_id(@__retain_semantics Other debugSignposts)]
        pub unsafe fn debugSignposts(&self) -> Id<NSArray<NSString>, Shared>;

        #[method(errorState)]
        pub unsafe fn errorState(&self) -> MTLCommandEncoderErrorState;
    }
);

pub type MTLCommandBufferHandler = *mut Block<(NonNull<MTLCommandBuffer>,), ()>;

ns_enum!(
    #[underlying(NSUInteger)]
    pub enum MTLDispatchType {
        MTLDispatchTypeSerial = 0,
        MTLDispatchTypeConcurrent = 1,
    }
);

extern_protocol!(
    pub struct MTLCommandBuffer;

    unsafe impl ProtocolType for MTLCommandBuffer {
        #[method_id(@__retain_semantics Other device)]
        pub unsafe fn device(&self) -> Id<MTLDevice, Shared>;

        #[method_id(@__retain_semantics Other commandQueue)]
        pub unsafe fn commandQueue(&self) -> Id<MTLCommandQueue, Shared>;

        #[method(retainedReferences)]
        pub unsafe fn retainedReferences(&self) -> bool;

        #[method(errorOptions)]
        pub unsafe fn errorOptions(&self) -> MTLCommandBufferErrorOption;

        #[cfg(feature = "Foundation_NSString")]
        #[method_id(@__retain_semantics Other label)]
        pub fn label(&self) -> Option<Id<NSString, Shared>>;

        #[cfg(feature = "Foundation_NSString")]
        #[method(setLabel:)]
        pub fn setLabel(&self, label: Option<&NSString>);

        #[method(kernelStartTime)]
        pub unsafe fn kernelStartTime(&self) -> CFTimeInterval;

        #[method(kernelEndTime)]
        pub unsafe fn kernelEndTime(&self) -> CFTimeInterval;

        #[method_id(@__retain_semantics Other logs)]
        pub unsafe fn logs(&self) -> Id<MTLLogContainer, Shared>;

        #[method(GPUStartTime)]
        pub unsafe fn GPUStartTime(&self) -> CFTimeInterval;

        #[method(GPUEndTime)]
        pub unsafe fn GPUEndTime(&self) -> CFTimeInterval;

        #[method(enqueue)]
        pub fn enqueue(&self);

        #[method(commit)]
        pub fn commit(&self);

        #[method(addScheduledHandler:)]
        pub unsafe fn addScheduledHandler(&self, block: MTLCommandBufferHandler);

        #[method(presentDrawable:)]
        pub fn presentDrawable(&self, drawable: &MTLDrawable);

        #[method(presentDrawable:atTime:)]
        pub unsafe fn presentDrawable_atTime(
            &self,
            drawable: &MTLDrawable,
            presentation_time: CFTimeInterval,
        );

        #[method(presentDrawable:afterMinimumDuration:)]
        pub unsafe fn presentDrawable_afterMinimumDuration(
            &self,
            drawable: &MTLDrawable,
            duration: CFTimeInterval,
        );

        #[method(waitUntilScheduled)]
        pub fn waitUntilScheduled(&self);

        #[method(addCompletedHandler:)]
        pub unsafe fn addCompletedHandler(&self, block: MTLCommandBufferHandler);

        #[method(waitUntilCompleted)]
        pub unsafe fn waitUntilCompleted(&self);

        #[method(status)]
        pub fn status(&self) -> MTLCommandBufferStatus;

        #[cfg(feature = "Foundation_NSError")]
        #[method_id(@__retain_semantics Other error)]
        pub unsafe fn error(&self) -> Option<Id<NSError, Shared>>;

        #[method_id(@__retain_semantics Other blitCommandEncoder)]
        pub fn blitCommandEncoder(&self) -> Option<Id<MTLBlitCommandEncoder, Shared>>;

        #[cfg(feature = "Metal_MTLRenderPassDescriptor")]
        #[method_id(@__retain_semantics Other renderCommandEncoderWithDescriptor:)]
        pub fn renderCommandEncoderWithDescriptor(
            &self,
            render_pass_descriptor: &MTLRenderPassDescriptor,
        ) -> Option<Id<MTLRenderCommandEncoder, Shared>>;

        #[cfg(feature = "Metal_MTLComputePassDescriptor")]
        #[method_id(@__retain_semantics Other computeCommandEncoderWithDescriptor:)]
        pub unsafe fn computeCommandEncoderWithDescriptor(
            &self,
            compute_pass_descriptor: &MTLComputePassDescriptor,
        ) -> Option<Id<MTLComputeCommandEncoder, Shared>>;

        #[cfg(feature = "Metal_MTLBlitPassDescriptor")]
        #[method_id(@__retain_semantics Other blitCommandEncoderWithDescriptor:)]
        pub unsafe fn blitCommandEncoderWithDescriptor(
            &self,
            blit_pass_descriptor: &MTLBlitPassDescriptor,
        ) -> Option<Id<MTLBlitCommandEncoder, Shared>>;

        #[method_id(@__retain_semantics Other computeCommandEncoder)]
        pub fn computeCommandEncoder(&self) -> Option<Id<MTLComputeCommandEncoder, Shared>>;

        #[method_id(@__retain_semantics Other computeCommandEncoderWithDispatchType:)]
        pub fn computeCommandEncoderWithDispatchType(
            &self,
            dispatch_type: MTLDispatchType,
        ) -> Option<Id<MTLComputeCommandEncoder, Shared>>;

        #[method(encodeWaitForEvent:value:)]
        pub fn encodeWaitForEvent_value(&self, event: &MTLEvent, value: u64);

        #[method(encodeSignalEvent:value:)]
        pub fn encodeSignalEvent_value(&self, event: &MTLEvent, value: u64);

        #[cfg(feature = "Metal_MTLRenderPassDescriptor")]
        #[method_id(@__retain_semantics Other parallelRenderCommandEncoderWithDescriptor:)]
        pub fn parallelRenderCommandEncoderWithDescriptor(
            &self,
            render_pass_descriptor: &MTLRenderPassDescriptor,
        ) -> Option<Id<MTLParallelRenderCommandEncoder, Shared>>;

        #[method_id(@__retain_semantics Other resourceStateCommandEncoder)]
        pub unsafe fn resourceStateCommandEncoder(
            &self,
        ) -> Option<Id<MTLResourceStateCommandEncoder, Shared>>;

        #[cfg(feature = "Metal_MTLResourceStatePassDescriptor")]
        #[method_id(@__retain_semantics Other resourceStateCommandEncoderWithDescriptor:)]
        pub unsafe fn resourceStateCommandEncoderWithDescriptor(
            &self,
            resource_state_pass_descriptor: &MTLResourceStatePassDescriptor,
        ) -> Option<Id<MTLResourceStateCommandEncoder, Shared>>;

        #[method_id(@__retain_semantics Other accelerationStructureCommandEncoder)]
        pub fn accelerationStructureCommandEncoder(
            &self,
        ) -> Option<Id<MTLAccelerationStructureCommandEncoder, Shared>>;

        #[cfg(feature = "Metal_MTLAccelerationStructurePassDescriptor")]
        #[method_id(@__retain_semantics Other accelerationStructureCommandEncoderWithDescriptor:)]
        pub unsafe fn accelerationStructureCommandEncoderWithDescriptor(
            &self,
            descriptor: &MTLAccelerationStructurePassDescriptor,
        ) -> Id<MTLAccelerationStructureCommandEncoder, Shared>;

        #[cfg(feature = "Foundation_NSString")]
        #[method(pushDebugGroup:)]
        pub fn pushDebugGroup(&self, string: &NSString);

        #[method(popDebugGroup)]
        pub fn popDebugGroup(&self);
    }
);
